/*
 * EphemeralOverlay Plugin Styles
 *
 * Styles for the drawing overlay, canvas, and mobile toolbar
 */

/* Utility classes for dynamic state changes */
.ephemeral-pointer-events-none {
	pointer-events: none;
}

.ephemeral-pointer-events-auto {
	pointer-events: auto;
}

.ephemeral-display-none {
	display: none;
}

.ephemeral-display-block {
	display: block;
}

.ephemeral-cursor-none {
	cursor: none;
}

/* Frozen content state - applied to prevent interactions */
.ephemeral-frozen {
	pointer-events: none;
	user-select: none;
	-webkit-touch-callout: none;
}

/* Overlay container - sits on top of Markdown view and blocks ALL interactions */
.ephemeral-overlay {
	position: absolute;
	inset: 0;
	z-index: 50;
	pointer-events: auto; /* Capture all pointer events */
	user-select: none; /* Prevent text selection */
	-webkit-user-select: none; /* Safari/iOS */
	-moz-user-select: none; /* Firefox */
	-ms-user-select: none; /* IE/Edge */
	touch-action: none; /* Prevent all touch gestures (scroll, zoom, selection) */
	-webkit-touch-callout: none; /* Prevent iOS callout menu */
}

/* Pen-only mode: Allow finger scrolling (pan gestures) while blocking pinch-zoom */
.ephemeral-overlay.pen-only-mode {
	touch-action: pan-x pan-y; /* Allow horizontal and vertical scrolling with finger */
}

/* Canvas element for drawing - fully blocks underlying content */
.ephemeral-overlay-canvas {
	width: 100%;
	height: 100%;
	touch-action: none; /* Prevent scrolling/zooming while drawing */
	cursor: crosshair;
	user-select: none; /* Prevent text selection */
	-webkit-user-select: none; /* Safari/iOS */
	pointer-events: auto; /* Ensure canvas captures all events */
	/* Performance optimizations for iPad/Apple Pencil */
	will-change: transform; /* GPU acceleration hint */
}

/* Pen-only mode canvas: Allow pan but only for touch (finger), pen events still blocked */
.ephemeral-overlay.pen-only-mode .ephemeral-overlay-canvas {
	touch-action: pan-x pan-y; /* Allow scrolling with finger */
}

/* Mobile toolbar - centered at bottom with safe area support */
.ephemeral-toolbar {
	position: absolute;
	bottom: calc(env(safe-area-inset-bottom) + 16px);
	left: 50%;
	transform: translateX(-50%);
	display: flex;
	gap: 12px;
	padding: 10px 14px;
	background: rgba(30, 30, 30, 0.9);
	border-radius: 12px;
	backdrop-filter: blur(10px);
	z-index: 100;
	align-items: center;
}

/* Toolbar button groups */
.ephemeral-toolbar-group {
	display: flex;
	gap: 6px;
	align-items: center;
}

/* Toolbar buttons - touch-friendly sizing */
.ephemeral-toolbar-btn {
	border: none;
	padding: 8px 12px;
	border-radius: 6px;
	color: black;
	font-weight: bold;
	font-size: 14px;
	cursor: pointer;
	min-width: 44px; /* Apple's recommended minimum touch target size */
	min-height: 44px;
	transition: all 0.2s ease;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.ephemeral-toolbar-btn:hover {
	opacity: 0.8;
	transform: translateY(-1px);
}

.ephemeral-toolbar-btn:active {
	opacity: 0.6;
	transform: translateY(0);
}

/* Width buttons */
.ephemeral-width-btn {
	background: var(--background-modifier-border) !important;
	color: var(--text-normal) !important;
	position: relative;
	border: 2px solid transparent;
	font-weight: bold;
}

/* Width button sizing based on data attribute */
.ephemeral-width-btn[data-width-size="2"] {
	font-size: 12px;
}

.ephemeral-width-btn[data-width-size="4"] {
	font-size: 16px;
}

.ephemeral-width-btn[data-width-size="8"] {
	font-size: 24px;
}

.ephemeral-width-btn.is-active {
	border-color: var(--interactive-accent);
	background: var(--background-modifier-hover) !important;
}

/* Width indicator (shows current pen width) */
.ephemeral-width-indicator {
	display: flex;
	align-items: center;
	justify-content: center;
	min-width: 40px;
	height: 44px;
	background: var(--background-modifier-border);
	border-radius: 6px;
	padding: 0 8px;
}

.ephemeral-width-dot {
	background: var(--text-normal);
	border-radius: 50%;
	transition: all 0.2s ease;
}

/* Dynamic width dot sizing based on data attribute */
.ephemeral-width-dot[data-width="2"] {
	width: 4px;
	height: 4px;
}

.ephemeral-width-dot[data-width="4"] {
	width: 8px;
	height: 8px;
}

.ephemeral-width-dot[data-width="8"] {
	width: 16px;
	height: 16px;
}

.ephemeral-width-dot[data-width="12"] {
	width: 24px;
	height: 24px;
}

.ephemeral-width-dot[data-width="16"] {
	width: 32px;
	height: 32px;
}

/* Ribbon icon active state indicator */
.side-dock-ribbon-action.is-active {
	color: var(--interactive-accent);
}

/* Custom cursor - filled circle showing pen width */
.ephemeral-cursor {
	position: fixed;
	border-radius: 50%;
	pointer-events: none;
	z-index: 9999;
	transform: translate(-50%, -50%);
	opacity: 0.7;
	transition: width 0.1s ease, height 0.1s ease, background-color 0.2s ease;
	border: 1px solid var(--background-modifier-border);
	box-shadow: 0 0 3px var(--background-modifier-box-shadow);
}

/* Cursor colors */
.ephemeral-cursor-red {
	background-color: #ff0000;
}

.ephemeral-cursor-yellow {
	background-color: #ffff00;
}

.ephemeral-cursor-blue {
	background-color: #0000ff;
}

.ephemeral-cursor-green {
	background-color: #00ff00;
}

.ephemeral-cursor-orange {
	background-color: #ff8800;
}

.ephemeral-cursor-pink {
	background-color: #ff69b4;
}

/* Color buttons */
.ephemeral-color-btn {
	font-weight: bold;
}

.ephemeral-color-red {
	background-color: #ff0000 !important;
	color: var(--text-on-accent) !important;
}

.ephemeral-color-yellow {
	background-color: #ffff00 !important;
	color: #000 !important;
}

.ephemeral-color-blue {
	background-color: #0000ff !important;
	color: var(--text-on-accent) !important;
}

.ephemeral-color-green {
	background-color: #00ff00 !important;
	color: #000 !important;
}

.ephemeral-color-orange {
	background-color: #ff8800 !important;
	color: var(--text-on-accent) !important;
}

.ephemeral-color-pink {
	background-color: #ff69b4 !important;
	color: var(--text-on-accent) !important;
}

/* Fade button */
.ephemeral-fade-btn {
	background-color: var(--background-modifier-border) !important;
	color: var(--text-normal) !important;
	font-size: 11px;
}

/* Action buttons */
.ephemeral-action-btn {
	color: var(--text-on-accent) !important;
}

.ephemeral-clear-btn {
	background-color: var(--interactive-normal) !important;
}

.ephemeral-exit-btn {
	background-color: var(--background-modifier-hover) !important;
}

